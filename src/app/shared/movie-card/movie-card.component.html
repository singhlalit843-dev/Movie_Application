<div
  class="bg-white rounded-2xl shadow hover:shadow-lg transition cursor-pointer overflow-hidden"
  (click)="open()"
>
  <!-- Poster -->
  <img
    [src]="tmdb.imageUrl(movie.poster_path, 'w300')"
    alt="{{ movie.title }}"
    class="w-full h-72 object-cover"
    loading="eager"
  />

  <!-- Info -->
  <div class="p-4 flex flex-col">
    <!-- Title -->
    <h3 class="font-semibold text-lg text-gray-800 truncate">
      {{ movie.title }}
    </h3>

    <!-- Year + Rating -->
    <div class="flex justify-between items-center mt-2 text-sm text-gray-600">
      <span>{{ movie.release_date | year }}</span>
      <span class="flex items-center gap-1">
        ⭐
        <span class="font-medium">{{
          movie.vote_average | number : "1.1-1"
        }}</span>
      </span>
    </div>

    <!-- Watchlist Toggle -->
    <button
      (click)="toggleWatchlist($event)"
      class="mt-3 inline-flex items-center gap-1 px-3 py-1 text-sm rounded-full"
      [ngClass]="{
        'bg-indigo-500 text-white': isInWatchlist,
        'bg-gray-200 text-gray-700': !isInWatchlist
      }"
    >
      <span *ngIf="isInWatchlist">✔ Remove</span>
      <span *ngIf="!isInWatchlist">+ Watchlist</span>
    </button>
  </div>
</div>
